import matplotlib.pyplot as plt
import matplotlib.animation as animation

import numpy as np


LEN = 128

data_str = [
"""0.036159 33.391350 6.521093 33.483528
0.044152 36.489586 3.074692 62.744328
0.000893 0.443738 0.095634 0.168623
0.000049 0.043622 0.025355 0.038172
0.000028 0.066154 0.005983 0.001964
0.000021 0.015382 0.001110 0.000388""",
# 1
"""0.000691 0.361892 0.062116 0.248663
0.014826 11.089073 5.410037 111.857353
0.004630 8.642300 0.515102 8.039535
0.000863 0.297178 0.152118 19.977655
0.000073 0.055837 0.010258 0.143564
0.000322 0.004724 0.009918 0.012585
0.000088 0.013145 0.003922 0.003351
0.000018 0.011141 0.001230 0.001141""",
# 2
"""0.023412 25.556271 0.279467 0.530552
0.035775 40.916729 14.901106 1.683481
0.001530 3.728881 2.210369 1.924904
0.000083 0.026563 0.022668 0.024660
0.000937 0.011952 0.006508 0.035577
0.000180 0.000000 0.000000 0.000000""",
# 3
"""0.233369 69.184601 4.107744 2.407342
0.565197 28.530708 8.510105 9.850874
0.016938 0.911320 0.622086 3.602239
0.005431 0.226461 0.147436 0.432274
0.000116 0.056835 0.001170 0.021054
0.000083 0.007896 0.014742 0.008392
0.000117 0.014643 0.000808 0.000381
0.000537 0.030605 0.000771 0.001303""",
# 4
"""0.265564 61.843807 49.003544 4.720306
0.577706 39.988319 9.589674 9.901048
0.021553 1.403458 0.837899 4.593742
0.024208 0.827736 0.114528 1.478998
0.018681 0.246252 0.263340 0.460145
0.001048 0.044518 0.607932 0.013363
0.000200 0.010690 0.015585 0.003776
0.000351 0.012992 0.004513 0.000544
0.000154 0.018042 0.003566 0.000166""",
# 5
"""0.000552 6.372399 3.961816 2.144173
6.965795 18.139402 17.329470 20.671833
0.350185 8.540502 0.658086 3.821619
0.063100 0.662963 0.358922 1.457814
0.058803 0.101341 0.162081 0.637522
0.011785 0.016410 0.002620 0.007446
0.001264 0.000628 0.015104 0.004827""",
# 6
"""7.953498 9.076298 13.245427 17.855671
8.765889 4.773503 1.349781 18.508230
1.988749 0.872985 21.316769 3.714693
0.244999 0.491862 0.481790 1.011749
0.003909 0.033022 0.012254 0.247593
0.000858 0.011860 0.001697 0.015423""",
# 7
"""0.006997 7.853584 0.314694 10.874501
0.044274 27.603312 4.202032 7.297887
0.002627 0.572921 0.202860 9.614155
0.000603 0.260114 0.915568 1.328493
0.000089 0.027794 0.038508 0.315474
0.000014 0.010082 0.565895 0.023148
0.000023 0.024120 0.000129 0.000328""",
# 8
"""0.568172 7.344982 0.120107 1.400524
5.521039 26.829311 2.288368 0.446999
0.449060 2.934741 9.417982 2.352239
0.004724 0.063489 0.176348 0.270168
0.010825 0.008601 0.025527 0.007865
0.002052 0.008315 0.152691 0.020869""",
]

def update_p_t_graph(ax, data):
    time = [i * LEN for i in range(len(data))]
    
    ax.clear()
    ax.plot(time, [d[0] for d in data], label='ch1')
    ax.plot(time, [d[1] for d in data], label='ch2')
    ax.plot(time, [d[2] for d in data], label='ch3')
    ax.plot(time, [d[3] for d in data], label='ch4')
    ax.set(xlabel='Time / ms', ylabel='Values', title='P-T Graph')
    ax.legend()


# メイン関数
def main():
    fig, ax = plt.subplots()
    max_length = max(len(data_str[i].split('\n')) for i in range(9))
    for i in range(9):
        data = [list(map(float, line.split())) for line in data_str[i].split('\n')]
        data = data + [[0, 0, 0, 0]] * (max_length - len(data))
        update_p_t_graph(ax, data)
        plt.savefig(f'output_{LEN}_{i}.png')



if __name__ == "__main__":
    main()